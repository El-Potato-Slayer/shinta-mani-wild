<template>
  <!-- design file: https://www.figma.com/file/SiFZE7hhRKx2fWmrfZ3uy2RO/Shinta-Mani-Wild?node-id=553%3A4724 -->
  <div class="page page--tents">
    <div class="page--content">
      <!-- header -->
      <page-header :is-view-tents-visible="false"></page-header>

      <div class="mb-5">
        <hero-image :image="resort.featuredImage"></hero-image>
      </div>

      <div id="tent-types" class="container is-small mb-5 page-description">
        <article>
          <base-heading
            :show-placeholder="!resort.id"
            :text="resort.title"
            :type="'h1'"
            :class-placeholder="'heading-placeholder mb-5'"
            :class-name="'h1 is-huge text-dark text-center mb-5'"
            :border-art="true"
          ></base-heading>

          <div v-if="!resort.id">
            <content-placeholders centered rounded class="description-placeholder">
              <content-placeholders-text :lines="3" />
            </content-placeholders>
          </div>
          <p
            v-else
            class="mb-0"
            v-read-more="{lineHeight: 24, lines: 3, linkClass: 'd-block float-right'}"
            v-text="resort.description"
          ></p>
        </article>
      </div>

      <!-- accommodations -->
      <section class="container is-small mb-5 featured-items">
        <base-articles-list
          :image-box-class="'ratio-3-2'"
          :preview-lines-of-read-more="2"
          :show-placeholder="!resort.id"
          :items-per-row="3"
          :items="accommodationsAsStories.slice(0,3)"
        ></base-articles-list>
      </section>

      <!-- quote -->
      <section class="container mb-5">
        <base-quote :show-placeholder="!resort.id" :class-name="'is-left'">
          <div class="quote w-100 h-100" v-html="resort.h2"></div>
        </base-quote>
      </section>

      <!-- banner action -->
      <div class="mb-5">
        <base-banner-action
          :image="resort.backgroundImage"
          :show-placeholder="!resort.id"
          :link="resort.ctaLink"
          :text="resort.ctaText"
          :button-text="'Find Out'"
        ></base-banner-action>
      </div>

      <!-- card -->
      <div class="container is-small">
        <div class="row mb-5">
          <div class="column-12">
            <base-card :show-placeholder="!resort.id" :image="cardImage1">
              <template v-slot:text>
                <div class="card-content">
                  <base-heading
                    :text="'All Inclusive'"
                    :type="'h2'"
                    :class-name="'h2 text-dark text-center text-xl-left'"
                  ></base-heading>
                  <p>Shinta Mani Wild is the full package - in every sense of the word. Our rates are inclusive of a round trip private car transfer to/from Phnom Penh or Sihanoukville Airport and vicinity, as well as your personal Bensley Butler, all meals and beverages, privately guided activities to explore the Cardamom forest, luxury spa treatments, WiFi throughout the camp and of course daily laundry service.</p>
                </div>
              </template>
            </base-card>
          </div>
        </div>
      </div>

      <!-- Pure text -->
      <div class="container is-small px-5 mb-5">
        <article>
          <h2 class="h2 font-serif text-center mb-4 text-uppercase">Amenities and Treats</h2>
          <p>
            The bedrooms of your tent are climate controlled, your Butler
            will show you the controls. For a more intimate jungle experience
            on cooler evenings open the windows (leave the screens down)
            and shut off your AC.
          </p>
          <p class="mb-5">
            In an effort to reduce waste in such a pristine part of the world,
            amenities such as a toothbrushes, soap or shampoo will not be
            kept in your tent. However should you need them, please do not
            hesitate to let your Adventure Butler know.
            Have you forgotten to pack an important item? For your
            convenience, we offer the following essentials to you with our
            compliments, as well as variety of items for you to purchase or
            borrow during your stay. Please contact the Bensley Butlers, and
            we will deliver the requested item(s) to your tent.
          </p>

          <div class="row justify-content-center">
            <div class="col-3">
              <h3 class="h4 font-weight-light font-italic">Complimentary</h3>
              <ul class="list-unstyled">
                <li>Toothbrush</li>
                <li>Toothpaste</li>
                <li>Hand sanitizer</li>
                <li>Razor</li>
                <li>Tissues</li>
                <li>Comb</li>
              </ul>
            </div>
            <div class="col-3">
              <h3 class="h4 font-weight-light font-italic">Borrow</h3>
              <ul class="list-unstyled">
                <li>Power adapter</li>
                <li>Curling iron</li>
                <li>Hair spray</li>
                <li>Nail polish remover</li>
                <li>Mosquito repellent</li>
                <li>Sewing kit</li>
                <li>Sunblock</li>
              </ul>
            </div>
            <div class="col-3">
              <h3 class="h4 font-weight-light font-italic">Purchase</h3>
              <ul class="list-unstyled">
                <li>Deodorant</li>
                <li>Sanitary Supplies</li>
              </ul>
            </div>
          </div>
        </article>
      </div>

      <!-- card -->
      <div class="container is-small">
        <div class="row mb-5">
          <div class="column-12">
            <base-card :show-placeholder="!resort.id" :image="cardImage2" :is-left="true">
              <template v-slot:text>
                <div class="card-content">
                  <base-heading
                    :text="'Personal Bujler'"
                    :type="'h2'"
                    :class-name="'h2 text-dark text-center text-xl-left'"
                  ></base-heading>
                  <p>Great guests deserve great butlers — and you’ll find both here. Part guide, part friend, part valet, part mindreader: Shinta Mani Wild’s Bensley Butlers will anticipate your needs before you do.</p>
                  <p>They’ll suggest unforgettable activities to suit your tastes and fitness, and accompany you on your adventures, from motorbike rides to boat trips. Your butler will also play the classic role of butler with aplomb, unpacking and packing your luggage and fulfilling your ad-hoc requests.</p>
                  <p>Please note: although we understand the temptation, guests are not allowed to take their butler home.</p>
                </div>
              </template>
            </base-card>
          </div>
        </div>
      </div>
    </div>

    <page-footer></page-footer>
  </div>
</template>

<script lang="ts">
import Vue from 'vue'
import PageHeader from '@/components/PageHeader.vue'
import PageFooter from '@/components/PageFooter.vue'
import HeroImage from '@/components/HeroImage.vue'
import BaseHeading from '@/components/BaseHeading.vue'
import BaseCard from '@/components/BaseCard.vue'
import BaseBannerAction from '@/components/BaseBannerAction.vue'
import BaseArticlesList from '@/components/BaseArticlesList.vue'
import BaseQuote from '@/components/BaseQuote.vue'
import { Story, Resort, Category } from '@/types'
import { get } from 'lodash-es'
import { categoryToStoryBridge } from '@/helpers'

export default Vue.extend({
  name: 'listing',
  components: {
    PageHeader,
    PageFooter,
    HeroImage,
    BaseHeading,
    BaseBannerAction,
    BaseArticlesList,
    BaseQuote,
    BaseCard
  },
  data() {
    return {
      slug: 'tents'
    }
  },
  computed: {
    resort(): Resort {
      return this.$store.getters['resort/getItem']
    },
    categories(): any {
      return this.$store.getters['category/getItems']
    },
    accommodations(): Category[] {
      return get(this.categories, 'accommodations', [])
    },
    accommodationsAsStories(): Story[] {
      // @ts-ignore
      return this.accommodations.map((category, index) => {
        return {
          ...categoryToStoryBridge(category),
          posterUrl: get(this.resort, `images[${index}].url`, '')
        }
      })
    },
    cardImage1(): object | undefined {
      const image = 'https://res.cloudinary.com/ddwsbpkzk/image/upload/v1567747072/Shinta%20Mani%20Wild/Tents/All_Inclusive_-_Tent_Page_Shinta_Mani_Wild_kdfq4g.jpg'
      if (!image) {
        return
      }
      return {
        alt: 'All Inclusive',
        xl: {
          src: image
        },
        default: {
          src: image
        }
      }
    },
    cardImage2(): object | undefined {
      const image = 'https://res.cloudinary.com/ddwsbpkzk/image/upload/v1568948083/Shinta%20Mani%20Wild/Tents/Head_Butler_Mac_-_Shinta_Mani_Wild_xxc4i9.jpg'
      if (!image) {
        return
      }
      return {
        alt: 'Conservation',
        xl: {
          src: image
        },
        default: {
          src: image
        }
      }
    }
  },
  mounted() {
    this.$store.dispatch('resort/getItemBySlug', this.slug)
    this.$store.dispatch('category/getItemsByName', 'accommodations')
  },
 
})
</script>

<style lang="scss" scoped>
::v-deep {
  .hero-image {
    height: rem($hero-height);

    @include hero-placeholder($hero-height);
  }
}
.page-description::v-deep {
  .heading-placeholder {
    height: rem(100px);
  }
  .vue-content-placeholders-heading {
    height: 100%;
  }
  .description-placeholder {
    height: rem(72px);
  }
}
.quote::v-deep {
  p {
    margin-bottom: 0;
    font-style: italic;
    font-weight: 300;
  }
  b {
    font-weight: bold;
    display: block;
  }
}
.featured-items {
  min-height: rem(318px);
  &::v-deep {
    .vue-content-placeholders-img {
      height: rem(192px);
    }
  }
}
.page--tents::v-deep {
  .card-image img {
    width: rem(384px);
  }
}
</style>
